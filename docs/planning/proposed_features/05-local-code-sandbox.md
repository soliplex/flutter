# Feature 05: Local Code Sandbox

## Usage
When the LLM generates a code snippet (Dart/JS), a "Run" button appears. The output is displayed in a console widget below the snippet.

## Specification
- **Engine:** `dart_eval` for Dart, `flutter_js` for JavaScript.
- **Security:** **CRITICAL**. Must run in an isolated environment. For Dart, maybe just a restricted subset or purely interpreted.

## Skeleton Code

```dart
import 'package:flutter_js/flutter_js.dart';

class CodeRunnerWidget extends StatelessWidget {
  final String code;

  Future<String> executeJS() async {
    final javascriptRuntime = getJavascriptRuntime();
    final result = javascriptRuntime.evaluate(code);
    return result.stringResult;
  }

  @override
  Widget build(BuildContext context) {
    return ElevatedButton.icon(
      icon: Icon(Icons.play_arrow),
      label: Text("Run"),
      onPressed: () async {
        final output = await executeJS();
        showOutputDialog(output);
      },
    );
  }
}
```

## Reviews

### Codex Review (Technical)
**Completeness:** High risk. Security sandboxing on mobile is hard.
**Feasibility:** Medium. `flutter_js` works well for simple logic.
**Novelty:** High.

### Skeptic Review (Product)
**Critique:** Useful for "Write me a function that..." queries. Dangerous if users run malicious code generated by a hallucinating LLM. Warning labels mandatory.
